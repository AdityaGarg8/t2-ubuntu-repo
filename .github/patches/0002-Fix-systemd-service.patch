From 3efd2ef2065f60967650a6ecbe95e8a4c82fdc09 Mon Sep 17 00:00:00 2001
From: Aditya Garg <gargaditya08@live.com>
Date: Sat, 28 Oct 2023 12:08:21 +0530
Subject: [PATCH] Fix systemd service

---
 etc/systemd/system/tiny-dfr.service | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/etc/systemd/system/tiny-dfr.service b/etc/systemd/system/tiny-dfr.service
index cdae366..a61c275 100644
--- a/etc/systemd/system/tiny-dfr.service
+++ b/etc/systemd/system/tiny-dfr.service
@@ -1,9 +1,13 @@
 [Unit]
 Description=Tiny Apple silicon touch bar daemon
 After=systemd-user-sessions.service getty@tty1.service plymouth-quit.service systemd-logind.service
-StartLimitIntervalSec=30
-StartLimitBurst=2
+StartLimitIntervalSec=500
+StartLimitBurst=5
 
 [Service]
 ExecStart=/usr/bin/tiny-dfr
-Restart=always
+Restart=on-failure
+RestartSec=5s
+
+[Install]
+WantedBy=multi-user.target
-- 
2.34.1

